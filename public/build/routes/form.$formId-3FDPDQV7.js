import{a as f}from"/build/_shared/chunk-XS4SS62Y.js";import{a as F}from"/build/_shared/chunk-6EOWRYR3.js";import"/build/_shared/chunk-4UTFCSAD.js";import{a as N,l as g,q as c}from"/build/_shared/chunk-TQQC2NO3.js";import{e as d}from"/build/_shared/chunk-2TWE7TSA.js";var D=d(F(),1);var s=d(N(),1),e=d(c(),1);function u(){let{formId:o}=g(),[x,b]=(0,s.useState)(!1),[a,p]=(0,s.useState)(null),[y,i]=(0,s.useState)(!0),[l,n]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!o){n("Form ID is missing"),i(!1);return}try{let t=localStorage.getItem(`form-data-${o}`);if(!t){n("Form not found"),i(!1);return}let r=JSON.parse(t);p(r),i(!1)}catch(t){console.error("Error loading form data:",t),n("Error loading form data"),i(!1)}},[o]);let v=async t=>{try{m(!0);let r=await fetch(`/api/forms/${o}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let k=await r.json();throw new Error(k.message||"Failed to submit form")}let L=await r.json();b(!0)}catch(r){console.error("Error saving submission:",r),n(r instanceof Error?r.message:"Error saving your submission")}finally{m(!1)}},w=t=>{console.log("Validation errors:",t)};return y?(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading form..."})]})}):l?(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:(0,e.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[(0,e.jsx)("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,e.jsx)("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,e.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Error Loading Form"}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:l})]})}):a?x?(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:(0,e.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[(0,e.jsx)("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,e.jsx)("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,e.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:a.settings.successMessage}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Your response has been recorded."})]})}):(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,e.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,e.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,e.jsx)("div",{className:"px-6 py-8",children:(0,e.jsx)(f,{fields:a.fields,settings:a.settings,formName:a.formName,formDescription:a.formDescription,onSubmit:v,onValidationError:w,isSubmitting:h})})})})}):(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:(0,e.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[(0,e.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Form Not Found"}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"The form you're looking for doesn't exist or has been removed."})]})})}export{u as default};
